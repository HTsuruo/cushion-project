{% extends "layout.html" %}

{% block content %}

<!-- .contents header -->
<section class="content-header">
  <h1>
    クッション
    <small>クッションに関する操作を管理します.</small>
  </h1>
</section>
<!-- /.contents header -->

<!-- Main content -->
<section class="content">

   <!-- コンテンツ1 -->
    <div class="box">
        <div class="box-header with-border">
            <h3 class="box-title">一覧</h3>
        </div>

        <div class="box-body table-responsive no-padding">
            <table class="table table-hover">
                <tr>
                    <th>名前</th>
                    <th>状態</th>
                    <th>ペア</th>
                    <th>最終利用日</th>
                </tr>
            {% if item_list is not none %}
                {% for item in item_list %}
                <tr>
                    <td>{{ item.name }}</td>
                    <td>
                        {% if item.status %}
                            <span class="label label-success">稼働中</span>
                        {% else %}
                            <span class="label label-danger">停止中</span>
                        {% endif %}
                    </td>
                    <td class="connected">
                        {{ item.connected_name }}
                        <input type="button" value="変更" class="btn btn-default btn-xs edit-btn">
                        <input type="button" value="キャンセル" class="btn btn-default btn-xs cancel-btn">
                        <input type="submit" value="保存" class="btn btn-primary btn-xs save-btn">
                    </td>
                    <td>{{ item.latest_date }}</td>
                </tr>
                {% endfor %}
            {% endif %}
              </table>
        </div>
    </div>

</section>

{% endblock %}

{% block javascript %}
    <script type="text/javascript">
        $(function(){
            $(".sidebar-menu #index").addClass("active");

            $("td.connected .cancel-btn").hide();
            $("td.connected .save-btn").hide();
            $("td.connected .edit-btn").bind('click', function() {
                $(this).hide();
                $(this).siblings(".cancel-btn").show();
                $(this).siblings(".save-btn").show();
            });
            $("td.connected .cancel-btn").bind('click', function() {
                $(this).hide();
                $(this).siblings(".save-btn").hide();
                $(this).siblings(".edit-btn").show();
            });
        });
    </script>
{% endblock %}